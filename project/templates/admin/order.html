{% extends 'list.html' %} {% block title %} Product {% endblock title %} {% block content %}

<main class="ml-60 pt-16 max-h-screen overflow-auto">
    <h1 class="text-xl font-semibold text-center">Order Management</h1>
<table class=" w-full text-sm text-left rtl:text-right text-gray-500 ">
    <thead class="text-xs text-gray-700 bg-gray-50 dark:bg-gray-700 font-semibold">
        <tr>
            <th scope="col" class="px-6 py-3">Id</th>
            <th scope="col" class="px-6 py-3">Name</th>
            <th scope="col" class="px-6 py-3">Date</th>
            <th scope="col" class="px-6 py-3">Payment</th>
            <th scope="col" class="px-6 py-3">Payment method</th>
            <th scope="col" class="px-6 py-3">Amount</th>
            <th scope="col" class="px-6 py-3">Status</th>
            <th scope="col" class="px-6 py-3">Product Details</th>
        </tr>
    </thead>
    <tbody>
        {% if orders %} {% for order in orders %}
        <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 text-black  font-semibold">
            
            <td class="px-6 py-4 text-center">{{order.id}}</td>
            <td class="px-6 py-4 text-center">{{order.user.name}}</td>
            <td class="px-6 py-4 text-center">{{order.order_date}}</td>
            <td class="px-6 py-4 text-center"> {% if order.is_paid %}
                <p>Paid</p>
                {% else %}
                <p>Not Paid</p>
                {% endif %}
                </td>
            <td class="px-6 py-6">{{order.payment_method}}</td>
            <td class="px-6 py-4">{{order.Grand_total}}</td>
            <td class="px-6 py-4  text-center">
                <form method="post" action="{% url 'change_order_status' order.id %}">
                    {% csrf_token %}
                    <select name="new_status">
                        <option value="confirmed" {% if order.status == 'confirmed' %}selected{% endif %}>Confirmed</option>
                        <option value="shipped" {% if order.status == 'shipped' %}selected{% endif %}>Shipped</option>
                        <option value="cancelled" {% if order.status == 'cancelled' %}selected{% endif %}>Cancelled</option>
                        <option value="delivered" {% if order.status == 'delivered' %}selected{% endif %}>Delivered</option>
                    </select>
                    <button type="submit">Change Status</button>
                </form>
            </td>
    
            <td class="px-6 py-4"><a href="{% url 'order_view' order.id %}"><button class="border border-grey-700 px-4 rounded-lg">view</button></a></td>

            {% endfor %} {% endif %}
            </tr>
            </tbody>
    
</table>
</main>


    {% endblock content %}
